strict digraph {
    graph [
        concentrate=true
        fontcolor=red
        fontsize=50
        label="metis.metis_wkf"
        labeljust=c
        labelloc=t
        rankdir=TD
        splines=spline
        ]
    edge [colorscheme=spectral11 penwidth=2]

    subgraph cluster1 {
        node [colorscheme=spectral11 fontsize=8 shape=box penwidth=4]
        fontcolor=darkblue
        fontsize=30
        label="Raw Types"
        "LM_LSS_STD_RAW" [color=3]
        "LM_LSS_WAVE_RAW" [color=1]
        "IFU_WAVE_RAW" [color=11]
        "N_LSS_RSRF_PINH_RAW" [color=4]
        "DETLIN_GEO_RAW" [color=1]
        "DETLIN_2RG_RAW" [color=8]
        "IFU_STD_RAW" [color=2]
        "LM_LSS_RSRF_PINH_RAW" [color=10]
        "N_IMAGE_STD_RAW" [color=5]
        "LM_IMAGE_SCI_RAW" [color=4]
        "N_FLAT_LAMP_RAW" [color=5]
        "DARK_GEO_RAW" [color=10]
        "N_LSS_STD_RAW" [color=3]
        "DARK_2RG_RAW" [color=5]
        "N_DISTORTION_RAW" [color=1]
        "N_LSS_RSRF_RAW" [color=7]
        "DETLIN_IFU_RAW" [color=2]
        "LM_IMAGE_SKY_RAW" [color=8]
        "LM_LSS_RSRF_RAW" [color=7]
        "IFU_DISTORTION_RAW" [color=9]
        "N_IMAGE_SCI_RAW" [color=3]
        "LM_FLAT_LAMP_RAW" [color=5]
        "LM_LSS_SCI_RAW" [color=5]
        "LM_PUPIL_RAW" [color=10]
        "DARK_IFU_RAW" [color=9]
        "N_ADC_SLITLOSS_RAW" [color=7]
        "LM_ADC_SLITLOSS_RAW" [color=3]
        "RSRF_IFU" [color=2]
        "IFU_SCI_RAW" [color=11]
        "N_LSS_SCI_RAW" [color=5]
        "LM_DISTORTION_RAW" [color=3]
    }

    "metis_lm_lss_mf_model" [color=green fontsize=12 shape=ellipse penwidth=4]
    "metis_n_adc_slitloss" [color=green fontsize=12 shape=ellipse penwidth=4]
    "metis_ifu_wavecal" [color=green fontsize=12 shape=ellipse penwidth=4]
    "metis_lm_lss_sci" [color=green fontsize=12 shape=ellipse penwidth=4]
    "metis_n_img_dark" [color=green fontsize=12 shape=ellipse penwidth=4]
    "metis_n_img_flat" [color=green fontsize=12 shape=ellipse penwidth=4]
    "metis_n_img_chopnod_sci" [color=green fontsize=12 shape=ellipse penwidth=4]
    "metis_n_lss_dark" [color=green fontsize=12 shape=ellipse penwidth=4]
    "metis_n_img_chopnod_std" [color=green fontsize=12 shape=ellipse penwidth=4]
    "metis_ifu_distortion" [color=green fontsize=12 shape=ellipse penwidth=4]
    "metis_ifu_dark" [color=green fontsize=12 shape=ellipse penwidth=4]
    "metis_n_lss_mf_correct" [color=green fontsize=12 shape=ellipse penwidth=4]
    "metis_lm_img_coadd" [color=green fontsize=12 shape=ellipse penwidth=4]
    "metis_lm_lss_rsrf" [color=green fontsize=12 shape=ellipse penwidth=4]
    "metis_n_lss_lingain" [color=green fontsize=12 shape=ellipse penwidth=4]
    "metis_n_img_standard_flux" [color=green fontsize=12 shape=ellipse penwidth=4]
    "metis_n_lss_trace" [color=green fontsize=12 shape=ellipse penwidth=4]
    "metis_lm_img_dark" [color=green fontsize=12 shape=ellipse penwidth=4]
    "metis_n_img_calib" [color=green fontsize=12 shape=ellipse penwidth=4]
    "metis_pupil_imaging" [color=green fontsize=12 shape=ellipse penwidth=4]
    "metis_lm_lss_trace" [color=green fontsize=12 shape=ellipse penwidth=4]
    "metis_ifu_sci_reduce" [color=green fontsize=12 shape=ellipse penwidth=4]
    "metis_n_lss_mf_calctrans" [color=green fontsize=12 shape=ellipse penwidth=4]
    "metis_ifu_sci_telluric" [color=green fontsize=12 shape=ellipse penwidth=4]
    "metis_n_img_lingain" [color=green fontsize=12 shape=ellipse penwidth=4]
    "metis_n_img_distortion" [color=green fontsize=12 shape=ellipse penwidth=4]
    "metis_lm_img_standard_flux" [color=green fontsize=12 shape=ellipse penwidth=4]
    "metis_lm_lss_lingain" [color=green fontsize=12 shape=ellipse penwidth=4]
    "metis_lm_img_basic_reduce_sci" [color=green fontsize=12 shape=ellipse penwidth=4]
    "metis_lm_lss_adc_slitloss" [color=green fontsize=12 shape=ellipse penwidth=4]
    "metis_ifu_std_reduce" [color=green fontsize=12 shape=ellipse penwidth=4]
    "metis_ifu_calibrate" [color=green fontsize=12 shape=ellipse penwidth=4]
    "metis_n_lss_sci" [color=green fontsize=12 shape=ellipse penwidth=4]
    "metis_lm_lss_wave" [color=green fontsize=12 shape=ellipse penwidth=4]
    "metis_ifu_lingain" [color=green fontsize=12 shape=ellipse penwidth=4]
    "metis_n_lss_rsrf" [color=green fontsize=12 shape=ellipse penwidth=4]
    "metis_lm_lss_std" [color=green fontsize=12 shape=ellipse penwidth=4]
    "metis_ifu_std_telluric" [color=green fontsize=12 shape=ellipse penwidth=4]
    "metis_lm_img_background_std" [color=green fontsize=12 shape=ellipse penwidth=4]
    "metis_n_img_restore" [color=green fontsize=12 shape=ellipse penwidth=4]
    "metis_lm_lss_dark" [color=green fontsize=12 shape=ellipse penwidth=4]
    "metis_lm_img_flat" [color=green fontsize=12 shape=ellipse penwidth=4]
    "metis_lm_img_lingain" [color=green fontsize=12 shape=ellipse penwidth=4]
    "metis_n_lss_mf_model" [color=green fontsize=12 shape=ellipse penwidth=4]
    "metis_lm_lss_mf_calctrans" [color=green fontsize=12 shape=ellipse penwidth=4]
    "metis_n_lss_std" [color=green fontsize=12 shape=ellipse penwidth=4]
    "metis_lm_lss_mf_correct" [color=green fontsize=12 shape=ellipse penwidth=4]
    "metis_lm_img_cal_distortion" [color=green fontsize=12 shape=ellipse penwidth=4]
    "metis_ifu_postprocess" [color=green fontsize=12 shape=ellipse penwidth=4]
    "metis_lm_img_calib" [color=green fontsize=12 shape=ellipse penwidth=4]
    "metis_ifu_rsrf" [color=green fontsize=12 shape=ellipse penwidth=4]
    "metis_lm_img_basic_reduce_sky" [color=green fontsize=12 shape=ellipse penwidth=4]
    "metis_lm_img_background_sci" [color=green fontsize=12 shape=ellipse penwidth=4]


    "metis_lm_lss_trace" -> "metis_lm_lss_sci" [color=black]
    "metis_lm_lss_trace" -> "metis_lm_lss_std" [color=black]
    "metis_lm_lss_trace" -> "metis_lm_lss_wave" [color=black]
    "LM_LSS_RSRF_PINH_RAW" -> "metis_lm_lss_trace" [color=10]
    "metis_lm_lss_dark" -> "metis_lm_lss_trace" [color=black]
    "metis_lm_lss_dark" -> "metis_lm_lss_sci" [color=black]
    "metis_lm_lss_dark" -> "metis_lm_lss_std" [color=black]
    "metis_lm_lss_dark" -> "metis_lm_lss_lingain" [color=black]
    "metis_lm_lss_dark" -> "metis_lm_lss_rsrf" [color=black]
    "metis_lm_lss_dark" -> "metis_lm_lss_wave" [color=black]
    "metis_lm_lss_lingain" -> "metis_lm_lss_trace" [color=black]
    "metis_lm_lss_lingain" -> "metis_lm_lss_rsrf" [color=black]
    "metis_lm_lss_lingain" -> "metis_lm_lss_wave" [color=black]
    "metis_lm_lss_rsrf" -> "metis_lm_lss_trace" [color=black]
    "metis_lm_lss_rsrf" -> "metis_lm_lss_sci" [color=black]
    "metis_lm_lss_rsrf" -> "metis_lm_lss_std" [color=black]
    "metis_lm_lss_rsrf" -> "metis_lm_lss_wave" [color=black]
    "DARK_2RG_RAW" -> "metis_lm_lss_dark" [color=5]
    "DARK_2RG_RAW" -> "metis_lm_img_dark" [color=5]
    "metis_n_img_distortion" -> "metis_n_img_calib" [color=black]
    "N_DISTORTION_RAW" -> "metis_n_img_distortion" [color=1]
    "metis_n_img_lingain" -> "metis_n_img_distortion" [color=black]
    "metis_n_img_lingain" -> "metis_n_img_chopnod_sci" [color=black]
    "metis_n_img_lingain" -> "metis_n_img_chopnod_std" [color=black]
    "metis_n_img_lingain" -> "metis_n_img_flat" [color=black]
    "metis_ifu_calibrate" -> "metis_ifu_postprocess" [color=black]
    "metis_ifu_sci_reduce" -> "metis_ifu_calibrate" [color=black]
    "metis_ifu_sci_reduce" -> "metis_ifu_sci_telluric" [color=black]
    "metis_ifu_sci_telluric" -> "metis_ifu_calibrate" [color=black]
    "metis_ifu_std_telluric" -> "metis_ifu_calibrate" [color=black]
    "metis_ifu_rsrf" -> "metis_ifu_std_reduce" [color=black]
    "metis_ifu_rsrf" -> "metis_ifu_sci_reduce" [color=black]
    "RSRF_IFU" -> "metis_ifu_rsrf" [color=2]
    "metis_ifu_lingain" -> "metis_ifu_rsrf" [color=black]
    "metis_ifu_lingain" -> "metis_ifu_std_reduce" [color=black]
    "metis_ifu_lingain" -> "metis_ifu_sci_reduce" [color=black]
    "metis_ifu_lingain" -> "metis_ifu_wavecal" [color=black]
    "metis_ifu_lingain" -> "metis_ifu_dark" [color=black]
    "metis_ifu_lingain" -> "metis_ifu_distortion" [color=black]
    "metis_ifu_dark" -> "metis_ifu_rsrf" [color=black]
    "metis_ifu_dark" -> "metis_ifu_std_reduce" [color=black]
    "metis_ifu_dark" -> "metis_ifu_sci_reduce" [color=black]
    "metis_ifu_dark" -> "metis_ifu_wavecal" [color=black]
    "metis_ifu_dark" -> "metis_ifu_distortion" [color=black]
    "metis_ifu_distortion" -> "metis_ifu_rsrf" [color=black]
    "metis_ifu_distortion" -> "metis_ifu_std_reduce" [color=black]
    "metis_ifu_distortion" -> "metis_ifu_sci_reduce" [color=black]
    "metis_ifu_distortion" -> "metis_ifu_wavecal" [color=black]
    "metis_ifu_wavecal" -> "metis_ifu_rsrf" [color=black]
    "metis_ifu_wavecal" -> "metis_ifu_std_reduce" [color=black]
    "metis_ifu_wavecal" -> "metis_ifu_sci_reduce" [color=black]
    "metis_ifu_std_reduce" -> "metis_ifu_std_telluric" [color=black]
    "IFU_STD_RAW" -> "metis_ifu_std_reduce" [color=2]
    "metis_n_img_chopnod_sci" -> "metis_n_img_calib" [color=black]
    "N_IMAGE_SCI_RAW" -> "metis_n_img_chopnod_sci" [color=3]
    "metis_n_img_dark" -> "metis_n_img_chopnod_sci" [color=black]
    "metis_n_img_dark" -> "metis_n_img_chopnod_std" [color=black]
    "metis_n_img_dark" -> "metis_n_img_lingain" [color=black]
    "metis_n_img_dark" -> "metis_n_img_flat" [color=black]
    "metis_n_img_flat" -> "metis_n_img_chopnod_sci" [color=black]
    "metis_n_img_flat" -> "metis_n_img_chopnod_std" [color=black]
    "IFU_SCI_RAW" -> "metis_ifu_sci_reduce" [color=11]
    "metis_lm_img_background_std" -> "metis_lm_img_standard_flux" [color=black]
    "metis_lm_img_basic_reduce_sci" -> "metis_lm_img_background_std" [color=black]
    "metis_lm_img_basic_reduce_sci" -> "metis_lm_img_background_sci" [color=black]
    "metis_lm_img_basic_reduce_sky" -> "metis_lm_img_background_std" [color=black]
    "metis_lm_img_basic_reduce_sky" -> "metis_lm_img_background_sci" [color=black]
    "metis_n_img_chopnod_std" -> "metis_n_img_standard_flux" [color=black]
    "N_IMAGE_STD_RAW" -> "metis_n_img_chopnod_std" [color=5]
    "DETLIN_GEO_RAW" -> "metis_n_img_lingain" [color=1]
    "DETLIN_GEO_RAW" -> "metis_n_lss_lingain" [color=1]
    "IFU_WAVE_RAW" -> "metis_ifu_wavecal" [color=11]
    "DETLIN_IFU_RAW" -> "metis_ifu_lingain" [color=2]
    "metis_lm_lss_adc_slitloss" -> "metis_lm_lss_std" [color=black]
    "LM_ADC_SLITLOSS_RAW" -> "metis_lm_lss_adc_slitloss" [color=3]
    "DARK_IFU_RAW" -> "metis_ifu_dark" [color=9]
    "metis_n_img_calib" -> "metis_n_img_restore" [color=black]
    "metis_n_lss_dark" -> "metis_n_lss_trace" [color=black]
    "metis_n_lss_dark" -> "metis_n_lss_std" [color=black]
    "metis_n_lss_dark" -> "metis_n_lss_sci" [color=black]
    "metis_n_lss_dark" -> "metis_n_lss_lingain" [color=black]
    "metis_n_lss_dark" -> "metis_n_lss_rsrf" [color=black]
    "DARK_GEO_RAW" -> "metis_n_lss_dark" [color=10]
    "DARK_GEO_RAW" -> "metis_n_img_dark" [color=10]
    "metis_n_lss_trace" -> "metis_n_lss_std" [color=black]
    "metis_n_lss_trace" -> "metis_n_lss_sci" [color=black]
    "N_LSS_RSRF_PINH_RAW" -> "metis_n_lss_trace" [color=4]
    "metis_n_lss_lingain" -> "metis_n_lss_trace" [color=black]
    "metis_n_lss_lingain" -> "metis_n_lss_rsrf" [color=black]
    "metis_n_lss_rsrf" -> "metis_n_lss_trace" [color=black]
    "metis_n_lss_rsrf" -> "metis_n_lss_std" [color=black]
    "metis_n_lss_rsrf" -> "metis_n_lss_sci" [color=black]
    "metis_n_lss_std" -> "metis_n_lss_mf_model" [color=black]
    "metis_n_lss_std" -> "metis_n_lss_sci" [color=black]
    "N_LSS_STD_RAW" -> "metis_n_lss_std" [color=3]
    "metis_n_adc_slitloss" -> "metis_n_lss_std" [color=black]
    "metis_lm_lss_sci" -> "metis_lm_lss_mf_model" [color=black]
    "metis_lm_lss_sci" -> "metis_lm_lss_mf_correct" [color=black]
    "LM_LSS_SCI_RAW" -> "metis_lm_lss_sci" [color=5]
    "metis_lm_lss_wave" -> "metis_lm_lss_sci" [color=black]
    "metis_lm_lss_wave" -> "metis_lm_lss_std" [color=black]
    "metis_lm_lss_std" -> "metis_lm_lss_sci" [color=black]
    "metis_lm_lss_std" -> "metis_lm_lss_mf_model" [color=black]
    "metis_lm_img_standard_flux" -> "metis_lm_img_calib" [color=black]
    "metis_lm_lss_mf_model" -> "metis_lm_lss_mf_calctrans" [color=black]
    "metis_lm_img_flat" -> "metis_pupil_imaging" [color=black]
    "metis_lm_img_flat" -> "metis_lm_img_basic_reduce_sci" [color=black]
    "metis_lm_img_flat" -> "metis_lm_img_basic_reduce_sky" [color=black]
    "LM_FLAT_LAMP_RAW" -> "metis_lm_img_flat" [color=5]
    "metis_lm_img_dark" -> "metis_lm_img_flat" [color=black]
    "metis_lm_img_dark" -> "metis_pupil_imaging" [color=black]
    "metis_lm_img_dark" -> "metis_lm_img_basic_reduce_sci" [color=black]
    "metis_lm_img_dark" -> "metis_lm_img_basic_reduce_sky" [color=black]
    "metis_lm_img_dark" -> "metis_lm_img_lingain" [color=black]
    "metis_lm_img_lingain" -> "metis_lm_img_flat" [color=black]
    "metis_lm_img_lingain" -> "metis_pupil_imaging" [color=black]
    "metis_lm_img_lingain" -> "metis_lm_img_cal_distortion" [color=black]
    "metis_lm_img_lingain" -> "metis_lm_img_basic_reduce_sci" [color=black]
    "metis_lm_img_lingain" -> "metis_lm_img_basic_reduce_sky" [color=black]
    "N_ADC_SLITLOSS_RAW" -> "metis_n_adc_slitloss" [color=7]
    "metis_n_lss_mf_model" -> "metis_n_lss_mf_calctrans" [color=black]
    "metis_n_lss_sci" -> "metis_n_lss_mf_model" [color=black]
    "metis_n_lss_sci" -> "metis_n_lss_mf_correct" [color=black]
    "metis_lm_img_background_sci" -> "metis_lm_img_calib" [color=black]
    "LM_LSS_STD_RAW" -> "metis_lm_lss_std" [color=3]
    "metis_n_lss_mf_calctrans" -> "metis_n_lss_mf_correct" [color=black]
    "DETLIN_2RG_RAW" -> "metis_lm_lss_lingain" [color=8]
    "DETLIN_2RG_RAW" -> "metis_lm_img_lingain" [color=8]
    "N_LSS_SCI_RAW" -> "metis_n_lss_sci" [color=5]
    "LM_LSS_RSRF_RAW" -> "metis_lm_lss_rsrf" [color=7]
    "metis_lm_img_calib" -> "metis_lm_img_coadd" [color=black]
    "metis_lm_img_cal_distortion" -> "metis_lm_img_calib" [color=black]
    "metis_n_img_standard_flux" -> "metis_n_img_calib" [color=black]
    "LM_PUPIL_RAW" -> "metis_pupil_imaging" [color=10]
    "LM_DISTORTION_RAW" -> "metis_lm_img_cal_distortion" [color=3]
    "IFU_DISTORTION_RAW" -> "metis_ifu_distortion" [color=9]
    "LM_IMAGE_SCI_RAW" -> "metis_lm_img_basic_reduce_sci" [color=4]
    "LM_IMAGE_SKY_RAW" -> "metis_lm_img_basic_reduce_sky" [color=8]
    "N_FLAT_LAMP_RAW" -> "metis_n_img_flat" [color=5]
    "N_LSS_RSRF_RAW" -> "metis_n_lss_rsrf" [color=7]
    "LM_LSS_WAVE_RAW" -> "metis_lm_lss_wave" [color=1]
    "metis_lm_lss_mf_calctrans" -> "metis_lm_lss_mf_correct" [color=black]
}
